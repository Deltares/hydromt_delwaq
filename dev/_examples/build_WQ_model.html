
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Build a water quality model &#8212; HydroMT delwaq  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <link rel="stylesheet" type="text/css" href="../_static/theme-deltares.css?v=a47b69cb" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_examples/build_WQ_model';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Add (global) emission data" href="adding_global_emission.html" />
    <link rel="prev" title="Build an emission model" href="build_EM_model.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.3.2.dev0" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/hydromt-icon.svg" class="logo__image only-light" alt=""/>
    <img src="../_static/hydromt-icon.svg" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">HydroMT DELWAQ</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../getting_started/intro.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/intro.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev/intro.html">
    Developments
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://deltares.github.io/hydromt/latest/index.html">
    HydroMT core
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Deltares/hydromt_delwaq" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg" class="icon-link-image" alt="GitHub"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.deltares.nl/en/software-and-data/products/delft3d-fm-suite/modules/d-water-quality" title="DELWAQ" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/delwaq_logo.png" class="icon-link-image" alt="DELWAQ"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://deltares.nl/en/" title="Deltares" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/deltares-blue.svg" class="icon-link-image" alt="Deltares"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../getting_started/intro.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/intro.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev/intro.html">
    Developments
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://deltares.github.io/hydromt/latest/index.html">
    HydroMT core
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Deltares/hydromt_delwaq" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg" class="icon-link-image" alt="GitHub"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.deltares.nl/en/software-and-data/products/delft3d-fm-suite/modules/d-water-quality" title="DELWAQ" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/delwaq_logo.png" class="icon-link-image" alt="DELWAQ"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://deltares.nl/en/" title="Deltares" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/deltares-blue.svg" class="icon-link-image" alt="Deltares"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation guide</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../getting_started/examples_index.html">Examples</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="build_EM_model.html">Build an emission model</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Build a water quality model</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding_global_emission.html">Add (global) emission data</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding_local_emission.html">Add (local) emission data</a></li>
<li class="toctree-l2"><a class="reference internal" href="update_model_monitoring.html">Update monitoring locations</a></li>
<li class="toctree-l2"><a class="reference internal" href="update_model_forcing.html">Update forcing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="plot_delwaq.html">Plot DELWAQ data</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../getting_started/intro.html" class="nav-link">Getting Started</a></li>
    
    
    <li class="breadcrumb-item"><a href="../getting_started/examples_index.html" class="nav-link">Examples</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Build a water quality model</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="admonition tip">
<p class="admonition-title">Tip</p>
<div>
    For an interactive online version click here:
    <a href="https://mybinder.org/v2/gh/Deltares/hydromt_delwaq/main?urlpath=lab/tree/examples/build_WQ_model.ipynb" target="_blank" rel="noopener noreferrer"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg"></a>
</div></div>
<section id="Build-a-water-quality-model">
<h1>Build a water quality model<a class="headerlink" href="#Build-a-water-quality-model" title="Link to this heading">#</a></h1>
<p>This notebook demonstrates how to prepare <strong>DELWAQ D-Water Quality</strong> model from scratch using the command line interace (CLI).</p>
<p>All lines in this notebook which start with <code class="docutils literal notranslate"><span class="pre">!</span></code> are executed from the command line. Within the notebook environment the logging messages are shown after completion. You can also copy these lines and paste these in your shell to get more direct feedback.</p>
<section id="HydroMT-CLI-build-interface">
<h2>HydroMT CLI build interface<a class="headerlink" href="#HydroMT-CLI-build-interface" title="Link to this heading">#</a></h2>
<p>In HydroMT, you can interact with <strong>DELWAQ models</strong> either to be used by <strong>D-Emissions (demission)</strong> or <strong>D-Water Quality (delwaq)</strong>.</p>
<p>Lets first check if the delwaq and demission models are recognized by hydromt</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this should return &quot;delwaq, demission, wflow, wflow_sediment&quot;</span>
<span class="o">!</span>hydromt<span class="w"> </span>--models
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Model plugins:
        - model (hydromt 1.3.0)
        - example_model (hydromt 1.3.0)
        - wflow_sbm (hydromt_wflow 1.0.1)
        - wflow_sediment (hydromt_wflow 1.0.1)
        - delwaq (hydromt_delwaq 0.3.2.dev0)
        - demission (hydromt_delwaq 0.3.2.dev0)
</pre></div></div>
</div>
<p>Using the <strong>hydromt build</strong> API we can setup a complete model from scratch. Let’s get an overview of all the available options:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>hydromt<span class="w"> </span>build<span class="w"> </span>--help
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Usage: hydromt build [OPTIONS] MODEL MODEL_ROOT

  Build models from scratch.

  Example usage: --------------

  To build a wflow model: hydromt build wflow_sbm /path/to/model_root -i
  /path/to/wflow_config.yml -d deltares_data -d /path/to/data_catalog.yml -v

  To build a sfincs model: hydromt build sfincs /path/to/model_root  -i
  /path/to/sfincs_config.yml -d /path/to/data_catalog.yml -v

Options:
  -i, --config PATH        Path to hydroMT configuration file, for the model
                           specific implementation.  [required]
  -d, --data TEXT          Path to local yaml data catalog file OR name of
                           predefined data catalog.
  --dd, --deltares-data    Flag: Shortcut to add the &#34;deltares_data&#34; catalog
  --fo, --force-overwrite  Flag: If provided overwrite existing model files
  --cache                  Flag: If provided cache tiled rasterdatasets
  -v, --verbose            Increase verbosity.
  -q, --quiet              Decrease verbosity.
  --help                   Show this message and exit.
</pre></div></div>
</div>
</section>
<section id="Setup-delwaq-model-base-layers">
<h2>Setup delwaq model base layers<a class="headerlink" href="#Setup-delwaq-model-base-layers" title="Link to this heading">#</a></h2>
<p>DELWAQ models are quite specific in the sense that they are usually added on top of an already existing hydrologic / hydraulic or hydrodynamic model. In HydroMT, for now, DELWAQ models (demission for D-Emissions and delwaq for D-Water Quality) can only be built on top of <a class="reference external" href="https://deltares.github.io/Wflow.jl/stable/">Wflow</a> hydrologic models. You can find more information on this coupling in
<a class="reference external" href="https://deltares.github.io/hydromt_delwaq/latest/advanced/coupling_wflow.html">docs(coupling_wflow)</a>.</p>
<p>Here is how you can build a D-Water Quality model using a model workflow configuration file.</p>
<p>The configuration file (yml) contains the model setup configuration and determines which components are build and in which order and optionally sets non-default arguments for each component. This configuration is passed to hydromt using <code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">&lt;path_to_configuration_file&gt;</span></code>. We have prepared several example files which are available in the model repository <a class="reference external" href="https://github.com/Deltares/hydromt_delwaq/tree/main/examples">examples folder</a> and from the
<a class="reference external" href="https://deltares.github.io/hydromt_delwaq/latest/user_guide/build_configuration.html">docs(build_configuration)</a>.</p>
<p>Each header as shown between <code class="docutils literal notranslate"><span class="pre">[...]</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">[setup_basemaps]</span></code>) corresponds to a model component. All model components are explained in the <a class="reference external" href="https://deltares.github.io/hydromt_delwaq/latest/user_guide/components.html">docs(model_components)</a>.</p>
<p><strong>Almost each DELWAQ model is unique</strong> depending on which substances and sources are included but also what kind of emission data is available. For these reasons, there is no default build configuration file for a delwaq model and still some manual steps are required to build and run a D-Water Quality model with HydroMT. You can learn more about these steps in the <a class="reference external" href="https://deltares.github.io/hydromt_delwaq/latest/advanced/generic_delwaq.html#water-quality-modelling-with-d-water-quality">docs(hydromt_D-Water
Quality)</a>.</p>
<p>We will load an example delwaq build configuration file for inspection:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fn_yml</span> <span class="o">=</span> <span class="s1">&#39;delwaq_build_WQ.yml&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn_yml</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
steps:
  - setup_basemaps:
      region:
        wflow_sbm: wflow_piave
      mask: rivers
      surface_water: sfw
      boundaries:
        - land
        - soil
        - sett
      fluxes:
        - sfw&gt;sfw
        - land&gt;sfw
        - soil&gt;sfw
        - sfw&gt;sett
      maps:
        - rivmsk
        - lndslp
        - strord
        - river_manning_n
        - soil_thickness
        - soil_theta_s

  - setup_monitoring:
      mon_points: wflow_piave/staticgeoms/outlets.geojson
      mon_areas: subcatch

  - setup_hydrology_forcing:
      hydro_forcing_fn: wflow_output_wq
      starttime: &#34;2010-02-03 00:00:00&#34;
      endtime: &#34;2010-02-10 00:00:00&#34;
      timestepsecs: 86400
      add_volume_offset: true
      override:
        - sfw&gt;sfw

  - write:

  - write_waqgeom:

</pre></div></div>
</div>
<p>Some explanations for the sections in the ini file above:</p>
<ul class="simple">
<li><p><strong>global</strong>: options true for every model components of delwaq. You can also add local data libaries in <em>data_libs</em> instead of in the command line here.</p></li>
<li><p><strong>setup_basemaps</strong>: prepares the first delwaq model layers (grid, segment ID) and the pointer based on the provided list of fluxes to and from the surface water. It can also prepare some staticdata for delwaq using maps from the hydrological model.</p></li>
<li><p><strong>setup_monitoring</strong>: prepares monitoring points using the gauges locations of the wflow model and the monitoring areas by subcatchments.</p></li>
<li><p><strong>setup_hydrology_forcing</strong>: prepares hydrological data from wflow outputs. Information on the <em>wflow_output</em> source is available in the <em>local_sources.yml</em>.</p></li>
</ul>
<p>For more information on all the options used (resampling method, NaN values handling…), please check the <a class="reference external" href="https://deltares.github.io/hydromt_delwaq/latest/user_guide/components.html">docs(model_components)</a></p>
</section>
<section id="Data-for-model-setup">
<h2>Data for model setup<a class="headerlink" href="#Data-for-model-setup" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;...&gt;_fn</span></code> arguments correspond to a data source from the <code class="docutils literal notranslate"><span class="pre">DataCatalog</span></code> which is based on a yml-file with references to the data paths/urls and how the data should be read. This file can be provided to hydromt using <code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">&lt;path_to_yml_file&gt;</span></code>.</p>
<p>By default some example data for the Piave basin will be downloaded to <code class="docutils literal notranslate"><span class="pre">~/.hydromt_data/</span></code> which is also used for this example. An overview of the available example data is provided <a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/data_catalog/data_existing_cat.html#available-pre-defined-data-catalogs">here</a> This example data is a based on the data which are available from the Deltares p-drive. If you have acces to this drive, a pre-configured catalog file can be loaded using
<code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">deltares_data</span></code>.</p>
<p>More background how to write a data catalog yml file can be found in the <a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/data_catalog/data_overview.html">hydromt core docs</a></p>
</section>
<section id="Setup-complete-D-Water-Quality-model">
<h2>Setup complete D-Water Quality model<a class="headerlink" href="#Setup-complete-D-Water-Quality-model" title="Link to this heading">#</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: copy this line (without !) to your shell for more direct feedback</span>
<span class="o">!</span>hydromt<span class="w"> </span>build<span class="w"> </span>delwaq<span class="w"> </span><span class="s2">&quot;./WQ_test&quot;</span><span class="w"> </span>-i<span class="w"> </span>delwaq_build_WQ.yml<span class="w"> </span>-d<span class="w"> </span>artifact_data<span class="w"> </span>-d<span class="w"> </span>local_sources.yml<span class="w"> </span>--fo<span class="w"> </span>-vv
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2026-01-19 02:34:49,525 - hydromt - log - INFO - HydroMT version: 1.3.0
2026-01-19 02:34:49,639 - hydromt.data_catalog.data_catalog - data_catalog - INFO - Reading data catalog artifact_data latest
2026-01-19 02:34:49,639 - hydromt.data_catalog.data_catalog - data_catalog - INFO - Parsing data catalog from /home/runner/.hydromt/artifact_data/v1.0.0/data_catalog.yml
2026-01-19 02:34:50,327 - hydromt.data_catalog.data_catalog - data_catalog - INFO - Parsing data catalog from local_sources.yml
2026-01-19 02:34:50,332 - hydromt.model.model - model - INFO - Initializing delwaq model from hydromt_delwaq (v0.3.2.dev0).
2026-01-19 02:34:50,333 - hydromt - log - INFO - HydroMT version: 1.3.0
2026-01-19 02:34:50,333 - hydromt.model.model - model - INFO - build: setup_basemaps
2026-01-19 02:34:50,333 - hydromt.model.model - model - INFO - setup_basemaps.mask=rivers
2026-01-19 02:34:50,333 - hydromt.model.model - model - INFO - setup_basemaps.surface_water=sfw
2026-01-19 02:34:50,333 - hydromt.model.model - model - INFO - setup_basemaps.boundaries=[&#39;land&#39;, &#39;soil&#39;, &#39;sett&#39;]
2026-01-19 02:34:50,333 - hydromt.model.model - model - INFO - setup_basemaps.fluxes=[&#39;sfw&gt;sfw&#39;, &#39;land&gt;sfw&#39;, &#39;soil&gt;sfw&#39;, &#39;sfw&gt;sett&#39;]
2026-01-19 02:34:50,333 - hydromt.model.model - model - INFO - setup_basemaps.maps=[&#39;rivmsk&#39;, &#39;lndslp&#39;, &#39;strord&#39;, &#39;river_manning_n&#39;, &#39;soil_thickness&#39;, &#39;soil_theta_s&#39;]
2026-01-19 02:34:50,333 - hydromt.model.model - model - INFO - setup_basemaps.region={&#39;wflow_sbm&#39;: PosixPath(&#39;/home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/wflow_piave&#39;)}
2026-01-19 02:34:50,334 - hydromt.model.model - model - INFO - Initializing wflow_sbm model from hydromt_wflow (v1.0.1).
2026-01-19 02:34:50,334 - hydromt.data_catalog.data_catalog - data_catalog - INFO - Parsing data catalog from /home/runner/miniconda3/envs/hydromt_delwaq/lib/python3.11/site-packages/hydromt_wflow/data/parameters_data.yml
2026-01-19 02:34:50,351 - hydromt.hydromt_wflow.wflow_base - wflow_base - INFO - Supported Wflow.jl version v1+
2026-01-19 02:34:50,351 - hydromt.hydromt_wflow.components.config - config - INFO - Reading model config file from /home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/wflow_piave/wflow_sbm.toml.
2026-01-19 02:34:50,352 - hydromt.hydromt_delwaq.delwaq - delwaq - INFO - Preparing WQ basemaps from hydromodel.
2026-01-19 02:34:51,554 - hydromt.hydromt_delwaq.components.pointer - pointer - WARNING - nrofseg object in self.pointer should be an integer.
2026-01-19 02:34:51,555 - hydromt.hydromt_delwaq.components.pointer - pointer - WARNING - boundaries object in self.pointer should be a list of names.
2026-01-19 02:34:51,582 - hydromt.model.model - model - INFO - build: setup_monitoring
2026-01-19 02:34:51,582 - hydromt.model.model - model - INFO - setup_monitoring.mon_points=/home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/wflow_piave/staticgeoms/outlets.geojson
2026-01-19 02:34:51,582 - hydromt.model.model - model - INFO - setup_monitoring.mon_areas=subcatch
2026-01-19 02:34:51,582 - hydromt.hydromt_delwaq.delwaq - delwaq - INFO - Setting monitoring points and areas
2026-01-19 02:34:51,582 - hydromt.hydromt_delwaq.delwaq - delwaq - INFO - Reading monitoring points from /home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/wflow_piave/staticgeoms/outlets.geojson
2026-01-19 02:34:51,599 - hydromt.data_catalog.sources.data_source - data_source - INFO - Reading outlets.geojson GeoDataFrame data from /home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/wflow_piave/staticgeoms/outlets.geojson
2026-01-19 02:34:51,623 - hydromt.model.model - model - INFO - build: setup_hydrology_forcing
2026-01-19 02:34:51,623 - hydromt.model.model - model - INFO - setup_hydrology_forcing.timestepsecs=86400
2026-01-19 02:34:51,623 - hydromt.model.model - model - INFO - setup_hydrology_forcing.add_volume_offset=True
2026-01-19 02:34:51,623 - hydromt.model.model - model - INFO - setup_hydrology_forcing.min_volume=0.1
2026-01-19 02:34:51,623 - hydromt.model.model - model - INFO - setup_hydrology_forcing.override=[&#39;sfw&gt;sfw&#39;]
2026-01-19 02:34:51,623 - hydromt.model.model - model - INFO - setup_hydrology_forcing.hydro_forcing_fn=wflow_output_wq
2026-01-19 02:34:51,623 - hydromt.model.model - model - INFO - setup_hydrology_forcing.starttime=2010-02-03 00:00:00
2026-01-19 02:34:51,624 - hydromt.model.model - model - INFO - setup_hydrology_forcing.endtime=2010-02-10 00:00:00
2026-01-19 02:34:51,624 - hydromt.hydromt_delwaq.delwaq - delwaq - INFO - Setting dynamic data from hydrology source wflow_output_wq.
2026-01-19 02:34:51,625 - hydromt.data_catalog.sources.data_source - data_source - INFO - Reading wflow_output_wq RasterDataset data from /home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/wflow_piave/run_default/output.nc
Flux sfw&gt;sett not found in hydro_forcing_fn. Using zeros.
2026-01-19 02:34:51,761 - hydromt.model.model - model - INFO - build: write
2026-01-19 02:34:51,761 - hydromt.hydromt_delwaq.delwaq - delwaq - INFO - Write model data to /home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/WQ_test
2026-01-19 02:34:51,780 - hydromt.hydromt_delwaq.components.staticdata - staticdata - INFO - Writing staticdata files.
2026-01-19 02:34:51,796 - hydromt.hydromt_delwaq.components.hydromaps - hydromaps - INFO - Writing hydromap files.
2026-01-19 02:34:51,850 - hydromt.model.components.geoms - geoms - INFO - delwaq.geoms: Writing geoms to /home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/WQ_test/geoms/basins.geojson.
2026-01-19 02:34:51,853 - hydromt.model.components.geoms - geoms - INFO - delwaq.geoms: Writing geoms to /home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/WQ_test/geoms/monpoints.geojson.
2026-01-19 02:34:51,856 - hydromt.model.components.geoms - geoms - INFO - delwaq.geoms: Writing geoms to /home/runner/work/hydromt_delwaq/hydromt_delwaq/docs/_examples/WQ_test/geoms/monareas.geojson.
2026-01-19 02:34:51,858 - hydromt.hydromt_delwaq.components.pointer - pointer - INFO - Writing pointer file in root/config
Writing dynamic data: 100%|███████████████████████| 9/9 [00:00&lt;00:00, 40.91it/s]
2026-01-19 02:34:52,094 - hydromt.hydromt_delwaq.components.config - config - INFO - Writing model config to file.
2026-01-19 02:34:52,095 - hydromt.model.model - model - INFO - build: write_waqgeom
</pre></div></div>
</div>
<p>The example above means the following: run <strong>hydromt build</strong> with:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">delwaq</span></code> : i.e. build a delwaq model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./WQ_test_base</span></code> : output model folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">or</span> <span class="pre">--region</span> <span class="pre">&quot;{'wflow':</span> <span class="pre">'wflow_piave'}&quot;</span></code> : derive the model from the existing wflow model located in wflow_piave folder. All <em>REGION</em> options are described in the <a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/models/model_region.html">docs</a>. For DELWAQ, the only possible options is from an existing wflow model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">delwaq_build_WQ.yml</span></code> : setup configuration file including all components to build and their arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">artifact_data</span></code>: use artifact_data predefined catalog.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">local_sources.yml</span></code>: use a local catalog for the wflow output files that will be used as forcing for the Delwaq model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-vv</span></code> : give some extra verbosity (2 * v) to display feedback on screen. Now debug messages are provided.</p></li>
</ul>
<p>Next we check which files and folders have been created:</p>
<ul class="simple">
<li><p><strong>config</strong>: basic configuration setups for the Delwaq input file .inp. Names of the ASCII files start with the corresponding block in the .inp file.</p></li>
<li><p><strong>dynamicdata</strong>: Delwaq time-dependant data (hydrological fluxes) in binary format.</p></li>
<li><p><strong>fews</strong>: additional files for connection with Delft-FEWS (not implemented yet)</p></li>
<li><p><strong>hydromodel</strong>: data extracted to connect the hydrological model (wflow) and Delwaq (tif format). These files are not mandatory for Delwaq but produced extra from HydroMT.</p></li>
<li><p><strong>staticdata</strong>: static (spatial but non time-dependant) data for Delwaq (typically emission data) in binary format. A copy of the data in NetCDF format is also available for easier visualization.</p></li>
<li><p><strong>geoms</strong>: related geometry files (geojson format). These files are not mandatory for Delwaq but produced extra from HydroMT.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="n">root</span> <span class="o">=</span> <span class="s1">&#39;WQ_test&#39;</span>
<span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.xml&#39;</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
WQ_test
 - hydromt_data.yml
 - hydromt.log
WQ_test/staticdata
 - bankfull_volume.dat
 - surface.dat
 - width.dat
 - length.dat
 - slope.dat
 - river.dat
 - streamorder.dat
 - latitude_grid.dat
 - porosity.dat
 - manning.dat
 - soil_thickness.dat
 - staticdata.nc
WQ_test/hydromodel
 - river.tif
 - modelmap.tif
 - ptiddown.tif
 - elevtn.tif
 - ptid.tif
 - rivarea.tif
 - basins.tif
 - resarea.tif
 - rivwth.tif
 - ldd.tif
 - rivlen.tif
WQ_test/config
 - B7_volume.inc
 - B2_outputtimes.inc
 - B4_nrofexch.inc
 - B2_stations-balance.inc
 - B2_stations.inc
 - B4_pointer.inc
 - B1_timestamp.inc
 - B5_boundlist.inc
 - B2_nrofmon.inc
 - B2_timers_only.inc
 - B3_nrofseg.inc
 - B3_attributes.inc
 - B2_monareas.inc
 - B7_flow.inc
 - B3_waqgeom.nc
 - B2_timers.inc
 - B2_sysclock.inc
 - B4_pointer.poi
WQ_test/dynamicdata
 - flow.dat
 - volume.dat
WQ_test/geoms
 - monpoints.geojson
 - monareas.geojson
 - basins.geojson
</pre></div></div>
</div>
<p>You can see that we didn’t create any emission data here. In some cases, you may require some additional GIS data in order to run a D-Water Quality model, for example, when you do not need to run the D-Emissions model beforehand, but include point sources that emit pollutants into the surface water directly. When this is the case, you can still use the various [setup_emission_*] components of hydromt_delwaq.</p>
</section>
<section id="Visualize-and/or-inspect-model-schematization">
<h2>Visualize and/or inspect model schematization<a class="headerlink" href="#Visualize-and/or-inspect-model-schematization" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>The <strong>delwaq plot</strong> example notebook contains scripts to visualize your model (staticdata, dynamicdata, hydromodel and geoms).</p></li>
</ul>
<p>In the meantime, feel free to have a look at some configuration files that were prepared by HydroMT. You can change the file name from the example code below.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="n">model_path</span> <span class="o">=</span> <span class="s1">&#39;./WQ_test&#39;</span>
<span class="n">fn_config</span> <span class="o">=</span> <span class="s1">&#39;config/B3_nrofseg.inc&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">model_path</span><span class="p">,</span><span class="n">fn_config</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
315 ; nr of segments

</pre></div></div>
</div>
<p>In the config folder, you can also see two pointer files:</p>
<ul class="simple">
<li><p>B4_pointer.poi (Binary version)</p></li>
<li><p>B4_pointer.inc (ASCII version)</p></li>
</ul>
<p>You can also see that a NetCDF file was created: <strong>B3_waqgeom.nc</strong>. This file can be used to produce NetCDF outputs directly when running D-Emissions or D-Water Quality but also to visualize the model in FEWS.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="build_EM_model.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Build an emission model</p>
      </div>
    </a>
    <a class="right-next"
       href="adding_global_emission.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Add (global) emission data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#HydroMT-CLI-build-interface">HydroMT CLI build interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Setup-delwaq-model-base-layers">Setup delwaq model base layers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Data-for-model-setup">Data for model setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Setup-complete-D-Water-Quality-model">Setup complete D-Water Quality model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Visualize-and/or-inspect-model-schematization">Visualize and/or inspect model schematization</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright Deltares.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>