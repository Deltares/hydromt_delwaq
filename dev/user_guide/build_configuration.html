

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Model configuration &mdash; hydromt_delwaq  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Model attributes" href="attributes.html" />
    <link rel="prev" title="hydromt_delwaq.delwaq.DelwaqModel.setup_emission_mapping" href="../generated/hydromt_delwaq.delwaq.DelwaqModel.setup_emission_mapping.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> hydromt_delwaq
          

          
          </a>

          
            
            
              <div class="version">
                0.1.2.dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="components.html">Model components</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Model configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file">Configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#selecting-data">Selecting data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-a-model">Building a model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-a-model">Updating a model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attributes.html">Model attributes</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/workflows.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/coupling_wflow.html">Coupling with Wflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/generic_delwaq.html">HydroMT and DELWAQ settings</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/api_index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hydromt_delwaq</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Model configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user_guide/build_configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="model-configuration">
<span id="model-config"></span><h1>Model configuration<a class="headerlink" href="#model-configuration" title="Permalink to this headline">¶</a></h1>
<p>This HydroMT plugin provides an implementation for DELWAQ in order to build, update or clip from
command line. Specific details on the HydroMT CLI methods can be found in the
<a class="reference external" href="https://deltares.github.io/hydromt_plugin/latest/user_guide/cli.html">core documentation</a></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>HydroMT can support the preparation of water quality models for <a class="reference external" href="https://oss.deltares.nl/web/delft3d/delwaq1/-/message_boards/category/205375">DELWAQ</a>.
As a reminder, a full hydrology - water quality simulation is in general separated in three parts:</p>
<ul class="simple">
<li><p>the hydrological model, for example wflow_sbm, that predicts water movements through the catchments.</p></li>
<li><p>an emission model, D-Emission (also referred to as EM in HydroMT and this documentation), that predicts
the quantity (fluxes) of substances being released from sources of pollutants to the surface waters (mass/time).</p></li>
<li><p>a fate and transport model, D-Water Quality (also referred to as WQ in HydroMT and this documentation),
that predicts the fate and transport of substances in the surface waters (concentrations in mass / volume).</p></li>
</ul>
<p>The Delwaq model class in HydroMT is able to prepare and interact both with EM or WQ types of Delwaq models.</p>
</div>
<div class="section" id="configuration-file">
<h2>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>Settings to build or update a Delwaq model are managed in a configuration file. In this file,
every option from each <a class="reference internal" href="components.html#model-components"><span class="std std-ref">model component</span></a> can be changed by the user
in its corresponding section.</p>
<p>In addition to the model components, the ini also contains a [global] section
in order to specify if the model to build/update is either an EM or a WQ model (‘mtype’ option).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[global]</span>
<span class="go">mtype = WQ                     # type of Delwaq model [&#39;EM&#39;, &#39;WQ&#39;]</span>
</pre></div>
</div>
<p>Most of the options are the same for preparing either a EM or WQ type of model. The main difference is with the
hydrological information needed by each model type. For an <strong>EM</strong> type of model, these are:</p>
<ul class="simple">
<li><p><strong>precip</strong>: precipitation</p></li>
<li><p><strong>infilt</strong>: the amount of the precipitation that infiltrates into the soil from unpaved areas</p></li>
<li><p><strong>runPav</strong>: the amount of the precipation that goes directly to surface runoff from paved areas</p></li>
<li><p><strong>runUnp</strong>: the amount of the precipation that goes directly to surface runoff from unpaved areas</p></li>
</ul>
<p>For a <strong>WQ</strong> type of model, these are:</p>
<ul class="simple">
<li><p><strong>run</strong>: surface runoff</p></li>
<li><p><strong>vol</strong>: surface water volumes</p></li>
<li><p><strong>inwater</strong> - <strong>inwaterInternal</strong>: total water entering the surface waters (e.g. precipitation, exfiltration from the soil,
evaporation…) in order to close the surface water mass balance.</p></li>
</ul>
<p>Below is an example of ini file that can be used to build a complete <strong>EM model</strong>
<code class="xref download docutils literal notranslate"><span class="pre">.ini</span> <span class="pre">file</span></code>. Each section corresponds
to a model component with the same name.</p>
<p>Below is an example of ini file that can be used to build a complete <strong>WQ model</strong>
<code class="xref download docutils literal notranslate"><span class="pre">.ini</span> <span class="pre">file</span></code>. Each section corresponds
to a model component with the same name.</p>
</div>
<div class="section" id="selecting-data">
<h2>Selecting data<a class="headerlink" href="#selecting-data" title="Permalink to this headline">¶</a></h2>
<p>Data sources in HydroMT are provided in one of several yaml libraries. These libraries contain required
information on the different data sources so that HydroMT can process them for the different models. There
are three ways for the user to select which data libraries to use:</p>
<ul class="simple">
<li><p>If no yaml file is selected, HydroMT will use the data stored in the
<a class="reference external" href="https://github.com/DirkEilander/hydromt-artifacts">hydromt-artifacts</a>
which contains an extract of global data for a small region around the Piave river in Northern Italy.</p></li>
<li><p>Another options for Deltares users is to select the deltares-data library (requires access to the Deltares
P-drive). In the command lines examples below, this is done by adding either <strong>-dd</strong> or <strong>–deltares-data</strong>
to the build / update command line.</p></li>
<li><p>Finally, the user can prepare its own yaml libary (or libraries) (see
<a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/data.html">HydroMT documentation</a> to check the guidelines).
These user libraries can be added either in the command line using the <strong>-d</strong> option and path/to/yaml or in the <strong>ini file</strong>
with the <strong>data_libs</strong> option in the [global] sections.</p></li>
</ul>
</div>
<div class="section" id="building-a-model">
<h2>Building a model<a class="headerlink" href="#building-a-model" title="Permalink to this headline">¶</a></h2>
<p>This plugin allows to build a complete DELWAQ model from available data. Once the configuration and
data libraries are set, you can build a model by using:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">activate hydromt-delwaq</span>
<span class="go">hydromt build delwaq path/to/built_model &quot;{&#39;wflow&#39;: path/to/wflow_model}&quot; -i delwaq_build.ini -d data_sources.yml -vv</span>
</pre></div>
</div>
<p>The recommended <a class="reference external" href="https://deltares.github.io/hydromt/latest/user_guide/cli.html#region-options">region options</a>
for a proper implementation of this model are:</p>
<ul class="simple">
<li><p>model</p></li>
</ul>
<p>Alternatively, do start from a complete new region, you can start by first using HydroMT to build the linked hydrological/hydrualic
model for your case and then build delwaq.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As of now, DELWAQ models can only be built on top of existing wflow models.</p>
</div>
</div>
<div class="section" id="updating-a-model">
<h2>Updating a model<a class="headerlink" href="#updating-a-model" title="Permalink to this headline">¶</a></h2>
<p>This plugin allows to update any components from a DELWAQ model. To do so, list the components to update in a configuration file,
if needed edit your data library with new data sources required for the update and use the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">activate hydromt-delwaq</span>
<span class="go">hydromt update delwaq path/to/model_to_update -o path/to/updated_model -i delwaq_update.ini -d data_sources.yml -vv</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="attributes.html" class="btn btn-neutral float-right" title="Model attributes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../generated/hydromt_delwaq.delwaq.DelwaqModel.setup_emission_mapping.html" class="btn btn-neutral float-left" title="hydromt_delwaq.delwaq.DelwaqModel.setup_emission_mapping" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Deltares.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>